---
layout: post
title: Jekyll简介
tags: Jekyll
categories: Blog
---

## jekyll 介绍
- Jekyll 是一个为博客设计的静态网站生成器.
- Jekyll 是一个基于文件的内容管理系统（CMS）.
- 它使用 Ruby 编写，通过 Markdown 和 Liquid 模板生成内容。




有了 Jekyll 这类静态博客生成工具,只需要一个静态 HTTP Server。
甚至，在有了 GitHub Pages 后，连服务器资源都可以省去。
当然，静态网站的好处不止是节省资源，还有安全、速度、扩展性等考虑。



## jekyll 版本
**最新的是 3.3 ** 
> 版本不一样  使用命令也不太一页

`jekyll new SITENAME(名字自取)` 快速构建一个全新的 Jekyll 站点



3.2.0 版发布后，Jekyll 支持了 jekyll new-theme 指令，可以方便的创建自己的主题，并且发布到 RubyGems。
有兴趣自制主题的 geeks，可以贡献出自己的主题。


[gems 中的 jekyll: 含jekyll各种依赖版本..][1]











## jekyll 结构简介

自己要做的事情: 根目录下:增加下面文件/文件夹
*文件:*
- index.html   // 主页
- about.html   // 关于页面 有的好
- contact.html // 联系烈面 也建议有一个.

*文件夹: *
- `_includes/`
	- header.html
	- footer.html
- `_layouts/`
	- default.html



只要你建立了`_include`文件夹
*jekyll自动载入 header.html  和 footer.html不需要任何设置   *












## Misc

- .md文件标题的 date 不能超过当前时间.
> 比如设置成2020年.这篇文章就不会显示到网页上…


css文件和scss文件都需要放到css文件夹中,scss在build的时候会自动编译为对应的
css文件，都可以直接在html中include。如果将scss文件放到sass文件夹中，必须被css
目录下的scss文件import才会被编译生效。





*主题包含: 布局文件 包含文件 样式表.*


## 常用变量:
jekyll 会遍历整个网站 来处理需要处理的文件.
任何有 yaml 头信息的文件都是要处理的对象
对于这样的文件: jekyll 会通过 liquid 模板工具来生成一系列的数据:

- 全局变量







- 全站变量




## 数据文件
可以用 liquid 模板 自定义数据...
*Jekyll 支持从 data 目录下的 YAML、JSON 和 CSV 载入数据，注意 CSV 文件必须包含表头行。*

这个强大的特性可以帮你避免模板中的重复，并能在不修改 config.yml 的情况下设置网站特定的选项。\_ 
`_date` 目录用于储存jekyll 生成的附加数据....
这些文件可以使用 .yml、.yaml、.json、csv 扩展名，并可通过 site.data 访问。





## Liquid 模板

- 过滤器: 把时间 转换成 各种形式....

**引用标签**
如果要在 多个地方 引用一段代码 用 include 标签...
~~~
{% include footer.html %}
~~~
{: .language-ruby}




## 代码高亮




## 博文链接 post url

	{% raw %}
	{% post_url 2010-07-21-name-of-post %}
	{% endraw %}








## post url








## title
 也就是网页标签

这个是分 默认页面 和 post 页面的.

默认页面是 site.title
博客页面是 page.title
在 default.html 下测试 只能获取到 site标题  因为 default 是默认主页... 
没有 文章标题....










## jekyll 原理 / 结构
可以把 markdown、textlie等模板语言转化成HTML


还能像PHP/Django框架那样使用模板，它能引入模板，
其default.html模板相当于Django的base.html模板。其工程结构：


~~~
|-- _config.yml  
|-- _includes  
|-- _layouts  
|   |-- default.html  
|   `-- post.html  
|-- _posts  
|   |-- 2007-10-29-why-every-programmer-should-play-nethack.textile  
|   `-- 2009-04-26-barcamp-boston-4-roundup.textile  
|-- _site  
`-- index.html  
~~~
{: .language-ruby}





	_config.yml：配置文件，主要用于设置基本信息和效果
	_includes：存放可复用的小模块，方便通过  include file.ext 调用，此命令调用includes中的file.ext文件
	_layouts：模板文件的存放位置，这里的模板需要通过YAML front matter来定义
	_posts：动态内容，一般博客正文存放在这个文件夹，命名有严格的规定：2016-04-15-artical-title.MARKUP，MARKUP就是你所使用标记语言的文件后缀名，根据_config.yml中设定的链接规则，所以可以灵活修改，文章的日期和标记语言后缀你与文章的标题是独立的
	_site：jekyll生成的最终文档，可以放在.gitignore文件中忽略它






## Jekyll Themes

Jekyll 主题在支持 RubyGems 前，需要通过复制来实现。很简单粗暴，就是把已经做好的 \_config.yml, \_includes, \_layouts 和相关静态文件一起复制到自己的目录中。
Jekyll 原生支持 sass，并且也可以通过插件形式使用 Less 等其它的 CSS 预处理器。
官方目前没有主题分享的网站，第三方主题资源分享网站还算比较丰富，甚至已经有了不少付费的主题。不过，这些网站都还没有迁移成 RubyGems。
3.2.0 版发布后，Jekyll 支持了 jekyll new-theme 指令，可以方便的创建自己的主题，并且发布到 RubyGems。有兴趣自制主题的 geeks，可以贡献出自己的主题。





### Liquid Templates

Jekyll 的底层模板层渲染基于开源 Ruby 库 Liquid 实现。这是一个 Shopify 公司开源出来的模版系统，用于 Shopify 的店铺主题系统。
Liquid 提供 Objects(对象)，Tags(标签)和 Filters(过滤器) 三种类型的模板标记。








## 目录结构
	|-- _config.yml
	|-- index.html
	|-- _includes
	|-- _layouts
	|   |-- default.html
	|   `-- post.html
	|-- css
	|-- js
	|-- _posts
	|   `-- 2015-04-27-Like-Kissing.md
	|-- images
	|   `-- Leah.png 
	|-- CNAME
	|-- _404.html
	|-- About.md
	|—— feed.xml
	`-- README.md



*目录文档详细说明。如下：*
• config.yml 博客配置文档（包括博客标题、favicon、博主 ID、头像、描述、联系方式等基本信息都在这个文档添加或修改）；
• index.html 博客架构文档；
• includes 博客调用的网页模块（比如导航栏、底栏、博文内容显示、评论模块等），一般不需要管；
• layouts 存放博客调用的页面模板文件（比如博客主页、具体博文页）的文件夹；
• css 存放博客系统的页面渲染文档文件夹，主要用于调节诸如标题字体、博文字体大小颜色之类；
• js 存放博客调用的 JS 文档文件夹
• posts 博客正文存放的文件夹。命名有规定，必须为「日期 + 标题」的模式，即「2015-04-27-Like-Kissing.md」，才能发布到博客里；
• images 图片文件夹，存放博客相关素材，包括博客 favicon、博主头像等图片及博文贴图素材；
• CNAME 用于绑定个人域名的文档；
• 404.html 「404 Not Found.」站点链接无法访问时的提示页面。
• About.html 博客中的个人说明文档（About Me），以 html、md 格式为主；
• feed.xml 博客的 RSS 订阅；
• README.md 项目说明文档。用于 Github 个人项目主页的说明（描述）。
除此之外，还有诸如 fonts 文件夹，存放博客用的字体文件，或有主题是将 css/js/fonts/images 等文件夹合并到 assets 为名的主文件夹中。404.html/feed.xml/CNAME 文件并非必须，但一般架构完整的博客都有。




*自定义内容:*

• config.yml
• About.html
• CNAME
• images


博客标题、博主 ID 一类都可以直接改。
博客 favicon、博主 avatar 一类，还需要到 images 文件夹替换图片和配置文件的对应文件名。注意原图的尺寸，尽量与模板中的原图保持一致。

CNAME 文件，如果有独立域名请修改该文件；如果没有，则删掉该文件；
















---


用 include 拆分你的页面结构.

先建立  include 文件夹.

博客布局: 上中下.
layout 中. 使用 `{\{content}\}` 读取中间这部分的内容.

中间的部分 又可以分成左右布局.
侧边栏 命名 aside.
我们可以通过`{\% include aside.html %\}`的方式来读取我们设置在 include 文件夹里面的文件。




*YAML* jekyll重要部分.
yaml 是一种直观的.
能够被电脑识别的数据序列化格式.

容易阅读. 容易和脚本语言 交互…





*特定页面 配置特定内容.*
每个页面都可以参照第一点来 “拆”。页面的头部，底部都是公用的，写在 defalt.html 里面。


每个不同的页面有不同的展现方式，在通过include “聚” 回来的时候，就会发现一个 defalut.html是不够的，因为侧边栏不同呀，页面展示效果不用呀等多种原因（虽然你可以确保风格一致）。


恩，你可以很愉快地在 _layouts 里面添加尽可能多的不同的布局。但那样管理和组织起来比较麻烦。_




所以你可以使用 YAML 为你的页面添加特定的 “钩子”，然后在 default.html 页面通过判断来输出相对的内容。例如我在 contact.html 页面写上这样的钩子isContact: true，然后我在为 contact 页面配置侧边栏的时候，我可以为其配置特定的内容，例如通过下面的代码配置出我的相片

//为了避免代码被编译，我在这里的 Jekyll 语法中间加上反斜干
{\% if(page.isContact) %\}
<section class="violet-photo">
<img src="xxxx.jpg" alt="xxx" />
</section>
{\% else %\}
<p>No Photo<p>
{\% endif %\}







*为文章详细页添加最新文章列表，但不包括本文章*
默认的配置文件里面的内容最好不要改动，在使用插件的时候，假如你将safe设置为true，那么可能你的插件就无法完成正常的任务。
但有些还是需要自定义的，例如permalink，用来自定义url的格式，这对固定链接有重要作用。我们也可以定义全局 title, url, feed, description等。最终都会以site.xxx来调用。



*灵活地为页面配置 CSS 和 Javascript*

Jekyll 博客，可能有很多不同的页面，展现、交互等形式都可能不同。

我们除了可以通过第三点讲过的 ”钩子” 方法来达到目的之外，还有另外的一种方法，为我们的页面配置不同的 CSS 和 Javascript 。


首先，在 default.html 页面的头部和底部写上另一种形式的 “钩子“。如下：

//一般，我们将 CSS 放在头部
{\% for css in page.css %\}
	<link rel="stylesheet" href="{\{ css }\}" type="text/css" />
{\% endfor %\}

//一般，我们将 Javascript 放在底部
{\% for js in page.javascript %\}
	<script type="text/javascript" src="{\{ js }\}" ></script>
{\% endfor %\}





其次，在我们的特定页面，在文件的头部 YAML 部分添加属于该页面的 CSS 或者 Javascript 链接。

javascript:
- /javascript/jquery.js
	- /javascript/violet.js





Jekyll入门参考网站: [阮一峰的教程][2]

*Jekyll 搭建中小型Blog或项目主页的最佳选项之一*  
*Jekyll 是一个静态站点生成器.也可以看作一个转换器(.md → .html)*  
*作用:  Markdown文本(.md) → 后台转换成→ 网页(.html)*  

1. 无数据库 (wordpress 是有数据库的.)  
2. 无CMS 内容管理系统
3. 快速  只处理 文字/图片/社交图片.
4. 极小的 
5. 提供了模板、变量、插件等...来生成整个网站。



> jekyll 基本流程:  
> 2016-05-15-blog-seo-baidu.md  →Jekyll编译后→  
> 2016/05/15/blog-seo-baidu.html.  
> 我们实际在网站上访问的结果也就是这个 HTML 文件，而不是对应的的 Markdown 文件。




**Jekyll 帮你标准化文档结构，文档样式，文档过程。 剩下就是提升自己的知识了。**

  





*优点: *
- 在.md文件里加几行特定格式的头部代码: jekyll 就能把.md 转换成 .html 
- 安全: 因为没有 CMS / 数据库 /PHP 所以没有安全漏洞.


*缺点:*
- 它不适合大型网站，因为没有用到数据库.
- 每运行一次都必须遍历全部的文本文件,网站越大,生成时间越长。
- 它生成的是静态网页，添加动态功能必须使用外部服务，比如评论功能就只能用disqus。





## Jekyll 目录结构
**layout 文件夹**  
存放主题的模板文件.决定了内容的呈现方式.

layout.ejs - 使用 EJS
layout.swig - 使用 Swig


多个 `_layout` 用于不同类型在 博文.
这个文件夹下创建 default.html
然后 回到 index.md 
在 front matter 下 添加:
layout:default .  刷新网页就可以了.




yaml 格式.



`_include` 文件夹 (必须下划线开头
存放网站的公用部分. 如: header/footer 











\*\*`_posts`文件夹\*\*
存放 md / html textile 等内容的文件.
















[1]:	https://rubygems.org/gems/jekyll/versions/2.5.3?locale=zh-CN
[2]:	http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html