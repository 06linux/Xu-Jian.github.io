---
layout: post
title:  选择器
tags: 选择器
categories: jQuery
order: 23
---

*`$` 是著名的 jquery 符号.*

*jquery 把所有的功能 全部封装在一个全局变量 `jQuery` 中. `$` 是全局变量`jQuery`的别名.*

~~~
window.jQuery; // jQuery(selector, context)
window.$;      // jQuery(selector, context)
$ === jQuery;  // true
~~~
{: .language-ruby}


**选择器是 jquery 的核心**

*为什么要发明选择器: 应为JS原生的选择器实在是太长 太难记了.*

~~~
var a = document.getElementById('dom-id');     // 按ID查找： 原生JS
var div = $('#abc');                           // 按ID查找： jquery    
~~~
{: .language-ruby}
jquery 返回的是对象. 类似数组.哪怕 id为abc的div不存在.会返回空数组.而不是 undefined或者null.
好处在于 不必在下一行判断 if (div === undefined)



## 按Tag查找
直接写 tag 名称就可以. 如p
~~~
var ps = $('p'); // 返回所有<p>节点
ps.length; // 数一数页面有多少个<p>节点
~~~
{: .language-ruby}




## 按Class查找
~~~
var a = $('.red'); // 所有节点包含`class="red"`都将返回
// 例如:
// <div class="red">...</div>
// <p class="green red">...</p>
~~~
{: .language-ruby}


~~~
var a = $('.red.green'); // 同时符合两个条件, 注意没有空格！
// 符合条件的节点：
// <div class="red green">...</div>
// <div class="blue green red">...</div>
~~~
{: .language-ruby}





## 按属性查找
DOM节点除了有 id/class 外还有很多属性: name / type / items...
> 当属性的值包含空格等特殊字符时，需要用双引号括起来。

~~~
var email = $('[name=email]');            // 找出<??? name="email">
var passwordInput = $('[type=password]'); // 找出<??? type="password">
var a = $('[items="A B"]');               // 找出<??? items="A B">
~~~
{: .language-ruby}


*按属性查找还可以使用前缀查找或者后缀查找：* 类似正则式

~~~
var icons = $('[name^=icon]'); // 找出所有name属性值以icon开头的DOM
// 例如: name="icon-1", name="icon-2"
var names = $('[name$=with]'); // 找出所有name属性值以with结尾的DOM
// 例如: name="startswith", name="endswith"
~~~
{: .language-ruby}




## 组合查找

如果我们查找`$('[name=email]')`，很可能把表单外的\<div name="email"\>也找出来，但我们只希望查找\<input\>，就可以这么写：
~~~
var emailInput = $('input[name=email]'); // 不会找出<div name="email">
~~~
{: .language-ruby}

同样的，根据tag和class来组合查找也很常见：
~~~
var tr = $('tr.red'); // 找出<tr class="red ...">...</tr>
~~~
{: .language-ruby}




## 多项选择器

~~~
$('p,div');          // 把<p>和<div>都选出来
$('p.red,p.green'); // 把<p class="red">和<p class="green">都选出来
~~~
{: .language-ruby}






--- 
# 层级选择器: Descendant selector
*除了基本的选择器外, jquery还有更加灵活,更加强大的 层级选择器.*
因为 DOM的结构 就是层级的. 所以经常要根据层级关系进行选择.

~~~
<!-- HTML结构 -->
<div class="testing">
    <ul class="lang">
        <li class="lang-javascript">JavaScript</li>
        <li class="lang-python">Python</li>
        <li class="lang-lua">Lua</li>
    </ul>
</div>
~~~
{: .language-ruby}

要选出JavaScript，可以用层级选择器：
~~~
$('ul.lang li.lang-javascript'); // [<li class="lang-javascript">JavaScript</li>]
$('div.testing li.lang-javascript'); // [<li class="lang-javascript">JavaScript</li>]
//因为<div>和<ul>都是<li>的祖先节点，所以上面两种方式都可以选出相应的<li>节点。
~~~
{: .language-ruby}


要选择所有`<li>`节点:
~~~
$('ul.lang li');
~~~
{: .language-ruby}
好处在于: 缩小了选择范围. 父节点 ul.lang 也就那么点范围. 避免了其他无关的元素.

~~~
$('form.test p input'); // 在form表单选择被<p>包含的<input>
~~~
{: .language-ruby}




---
# 子选择器 Child selector
`$('parent>child')`
类似层级选择器,但是规定了 必须是父子关系. 不是孙子.是父子! 

还是上面的例子
~~~
$('ul.lang>li.lang-javascript'); // 可以选出[<li class="lang-javascript">JavaScript</li>]
$('div.testing>li.lang-javascript'); // [], 无法选出，因为<div>和<li>不构成父子关系
~~~
{: .language-ruby}




## 过滤器 Filter
一般不单独使用. 通常附加在选择器上. 帮助我们更精确的定位元素.

~~~
$('ul.lang li'); // 选出JavaScript、Python和Lua 3个节点

$('ul.lang li:first-child'); // 仅选出JavaScript
$('ul.lang li:last-child'); // 仅选出Lua
$('ul.lang li:nth-child(2)'); // 选出第N个元素，N从1开始
$('ul.lang li:nth-child(even)'); // 选出序号为偶数的元素
$('ul.lang li:nth-child(odd)'); // 选出序号为奇数的元素
~~~
{: .language-ruby}





## 表单相关 特殊选择器


• :input：可以选择\<input\>，\<textarea\>，\<select\>和\<button\>；
• :file：可以选择\<input type="file"\>，和input[type=file]()一样；
• :checkbox：可以选择复选框，和input[type=checkbox]()一样；
• :radio：可以选择单选框，和input[type=radio]()一样；
• :focus：可以选择当前输入焦点的元素，例如把光标放到一个\<input\>上，用$('input:focus')就可以选出；
• :checked：选择当前勾上的单选框和复选框，用这个选择器可以立刻获得用户选择的项目，如$('input[type=radio]():checked')；
• :enabled：可以选择可以正常输入的\<input\>、\<select\>等，也就是没有灰掉的输入；
• :disabled：和:enabled正好相反，选择那些不能输入的。  

~~~
$('div:visible'); // 所有可见的div
$('div:hidden');  // 所有隐藏的div
~~~
{: .language-ruby}











































