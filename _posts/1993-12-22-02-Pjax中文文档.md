---
layout: post
title:  Pjax中文文档
tags: Pjax
categories: Web
---
[http://www.uedsc.com/jquery-pjax-js.html][1]








## 定义需要局部更新的容器..
`<div id="container"></div>`


## 初始化 pjax 监听url
~~~
$(function(){
  $(document).pjax('a', '#container');
  $.pjax.reload('#container');
})
~~~
{: .language-ruby}



## 后端处理
后端的处理逻辑是，首先判断是不是pjax请求，如果是的话，根据请求参数返回局部内容，否则返回layout布局，然后由$.pjax.reload('#container');发起pjax请求。

~~~
var pjaxFilter = function(req, res, next) {
  if (req.get('X-PJAX')) {
    next();
    return;
  }
  //如果不是pjax请求的话直接返回布局模板
  res.render('layout', { title: 'Pjax simple demo' });
};

router.get('/', pjaxFilter, function(req, res) {
  res.render('index');
});

router.get('/poem/:id', pjaxFilter, function(req, res) {
  var poemId = req.params.id;
  res.render('poem/' + poemId);
})
~~~
{: .language-ruby}














pjax 需要在html里 设置和指定一个包含在您页面上的元素.
当你浏览网站时将被替换.



大部分情况 我们值希望返回页面的内容.
而不要任何布局...
~~~
def index
  if request.headers['X-PJAX']
    render :layout => false
  end
end
~~~
{: .language-ruby}

[1]:	http://www.uedsc.com/jquery-pjax-js.html