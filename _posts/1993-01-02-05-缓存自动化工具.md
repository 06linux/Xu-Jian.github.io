---
layout: post
title: 缓存自动化工具
tags: HTML5缓存
categories: Web
---


manifest文件中的cache部分不能使用通配符，必须手动指定，这实在太让人不可理解，文件一多，就成了体力活了，这里介绍的 grunt-manifest能自动生成manifest文件的目的。grunt-manifest依赖grunt，grunt是一个自动化构建工具，如果你不知道grunt，请移步这里。
如下的命令可以安装grunt-manifest，并加入到依赖文件。


~~~
npm install grunt-manifest --save-dev
~~~
{: .language-ruby}
如下的代码，可以在grunt中载入grunt-manifest，然后便可使用。

~~~
grunt.loadNpmTasks('grunt-manifest');
~~~
{: .language-ruby}


使用grunt-manifest的一个典型的配置文件如下所示：

~~~
grunt.initConfig({
  manifest: {
    generate: {
      options: {
        basePath: "../",
        cache: ["js/app.js", "css/style.css"]
        network: ["http://*", "https://*"],
        fallback: ["/ /offline.html"],
        exclude: ["js/jquery.min.js"],
        preferOnline: true,
        verbose: true,
        timestamp: true
      },
      src: [
            "some_files/*.html",
          "js/*.min.js",
          "css/*.css"
      ],
      dest: "index.manifest"
    }
  }
});
~~~
{: .language-ruby}



其中options定义生成manifest的一些自定义参数，src是要生成的文件，dest是输出文件。
options下有很多参数，主要参数如下：
•	basePath 设置出入文件的根目录
•	cache 手动添加缓存文件
•	network 手动添加网络文件
•	fallback 手动添加后备文件
•	exclude 设置不添加到cache的文件
•	verbose 是否添加版权信息
•	timestamp 是否添加时间戳
这里有basejs的配置文件和生成的manifest文件的例子。















