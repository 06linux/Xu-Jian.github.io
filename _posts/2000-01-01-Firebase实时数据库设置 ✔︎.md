---
layout: post
title: Firebase实时数据库设置✔︎
tags: Ⓦ-Firebase
categories: Tool
---



## 开启服务 先决条件

在应用/网页中 添加和配置 Firebase SDK




### 网页配置Firebase

好像要引入 js
`<script src="https://www.gstatic.com/firebasejs/3.0.4/firebase.js"></script>`




## 获取数据库 引用


您将通过 firebase.initializeApp() 初始化 SDK：


~~~
// See https://firebase.google.com/docs/web/setup#project_setup for how to
// auto-generate this config
var config = {
  apiKey: "apiKey",
  authDomain: "projectId.firebaseapp.com",
  databaseURL: "https://databaseName.firebaseio.com"
};

firebase.initializeApp(config);

var rootRef = firebase.database().ref();
~~~
{: .language-ruby}




~~~
更新之后
// Reference
var key = ref.key;
var rootRef = ref.root;
var parentRef = ref.parent;

// Query
var queryRef = query.ref;

// DataSnapshot
ref.on("value", function(snapshot) {
  var dataRef = snapshot.ref;
  var dataKey = snapshot.key;
});
~~~
{: .language-ruby}





### 更新您的身份验证代码

Firebase 身份验证功能此时存在于其自己的 firebase.auth() 服务之后，许多方法已重命名。 例如，下面是用 OAuth 提供程序对用户进行身份验证的方法：



~~~
var auth = firebase.auth();

var provider = new firebase.auth.TwitterAuthProvider();
auth.signInWithPopup(provider).then(function(result) {
  // User signed in!
  var uid = result.user.uid;
}).catch(function(error) {
  // An error occurred
});
~~~
{: .language-ruby}





## 获取访问令牌

~~~
var auth = firebase.auth();

var provider = new firebase.auth.GoogleAuthProvider();
auth.signInWithPopup(provider).then(function(result) {
  var accessToken = result.credential.accessToken;
});
~~~
{: .language-ruby}



## 监控身份验证状态

~~~
var auth = firebase.auth();

auth.onAuthStateChanged(function(user) {
  if (user) {
    // User signed in!
    var uid = user.uid;
  } else {
    // User logged out
  }
});
~~~
{: .language-ruby}




## 更新新重设密码模板

如果您的应用允许用户用通过电子邮件与密码身份验证登录 方式登录，可能还向这些用户提供了重设密码的选项。
您升级为新 SDK 后，这些重设密码电子邮件将使用在 Firebase 控制台指定的新模板。 请务必为满足应用需要更新这些模板。













